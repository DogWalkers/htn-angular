<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      #map_canvas{
        width: 500px;
        height: 500px;
      }
    </style>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&.js"></script>
         <script type="text/javascript">
      var map = null;
      var homeMarkerLocation = new google.maps.LatLng(-33.80010128657071, 151.28747820854187);
      var markerArray = []; //create a global array to store markers
      var locations = [
        ['Bondi Beach', -33.890542, 151.274856, 4],
        ['Coogee Beach', -33.923036, 151.259052, 5],
        ['Cronulla Beach', -34.028249, 151.157507, 3],
        ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
        ['Maroubra Beach', -33.950198, 151.259302, 1]];

      function initialize() {
        var myOptions = {
            zoom: 10,
            center: homeMarkerLocation,
            mapTypeControl: false,
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        for (var i = 0; i < locations.length; i++) {
            createMarker(new google.maps.LatLng(locations[i][1], locations[i][2]), locations[i][0], locations[i][3], locations[i][4]);
        }
        setTimeout(3000, createRadius(5000));
      }

      function createMarker(latlng, myTitle, myNum, myIcon) {
        var contentString = myTitle;
        var marker = new google.maps.Marker({
          position: latlng,
          map: map,
          zIndex: Math.round(latlng.lat() * -100000) << 5,
          title: myTitle
        });

        if (!marker.position.equals(homeMarkerLocation)) {
          // create infowindow with a size and content, then add a listener to it and then open it
          var infowindow = new google.maps.InfoWindow({
            size: new google.maps.Size(150, 50),
            content: contentString
          });
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
          });
          infowindow.open(map, marker);
        }
       
        markerArray.push(marker); //push local var marker into global array
      }

      function createRadius(dist) {
        var myCircle = new google.maps.Circle({
          center: markerArray[markerArray.length - 1].getPosition(),
          map: map,
          radius: dist,
          strokeOpacity: 0,
          fillOpacity: 0
        });
        var myBounds = myCircle.getBounds();
        
        //filters markers
        for(var i=markerArray.length;i--;) {
          if(!myBounds.contains(markerArray[i].getPosition()))
            markerArray[i].setMap(null);
        }
        map.setCenter(markerArray[markerArray.length - 1].getPosition());
        map.setZoom(map.getZoom()+1);
      }

      window.onload = initialize;
      function createCir() {
        createRadius(5000);
      }
      function changeAddress() {
        map.setCenter(new google.maps.LatLng(-34.028249, 151.157507)); // SHOULD BE THE LOCATION ENTERED
      }
    </script>
   </head>
  <body>
    <div id="map_canvas"></div>
    <button onclick="createCir()">Create Circle</button>
    <input type="text" id="address">
    <button onclick="changeAddress()">Go</button>
  </body>
</html>