<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      #map_canvas{
        width: 500px;
        height: 500px;
      }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
         <script type="text/javascript">
      var map = null;
      var homeMarkerLocation = new google.maps.LatLng(-33.80010128657071, 151.28747820854187);
      var markerArray = []; //create a global array to store markers
      var locations = [
        ['Bondi Beach', -33.890542, 151.274856, 4],
        ['Coogee Beach', -33.923036, 151.259052, 5],
        ['Cronulla Beach', -34.028249, 151.157507, 3],
        ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
        ['Maroubra Beach', -33.950198, 151.259302, 1]];

      function initialize() {
        var myOptions = {
            zoom: 10,
            center: homeMarkerLocation,
            mapTypeControl: false,
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        var j = locations.length - 1;
        dropAndCreateMarker = function(j) {
          if (j == -1) {
            return;
          } else {
            setTimeout(function() {
              createMarker(new google.maps.LatLng(locations[j][1], locations[j][2]), locations[j][0], locations[j][3], locations[j][4]);
              j--;
              dropAndCreateMarker(j);
              //infowindow.open(map, marker);
            }, 400);
          }
        }
        dropAndCreateMarker(j);

        /*for (var i = 0; i < locations.length; i++) {
          setTimeout(function() {
            createMarker(new google.maps.LatLng(locations[i][1], locations[i][2]), locations[i][0], locations[i][3], locations[i][4]);
          }, i * 200);
        }*/
        //setTimeout(createRadius(5000), 3000);
      }

      function createMarker(latlng, myTitle, myNum, myIcon) {
        var contentString = myTitle;
        var marker = new google.maps.Marker({
          animation: google.maps.Animation.DROP,
          position: latlng,
          map: map,
          zIndex: Math.round(latlng.lat() * -100000) << 5,
          icon: '../assets/img/locationMarker.png',
          title: myTitle
        });

        if (!marker.position.equals(homeMarkerLocation)) {
          // create infowindow with a size and content, then add a listener to it and then open it
          var infowindow = new google.maps.InfoWindow({
            size: new google.maps.Size(150, 50),
            content: contentString
          });
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
          });
          //infowindow.open(map, marker);
        } else {
          marker.icon = '../assets/img/homeMarker.png';
        }
       
        markerArray.push(marker); //push local var marker into global array
      }

      function createRadius(dist) {
        var myCircle = new google.maps.Circle({
          center: markerArray[markerArray.length - 1].getPosition(),
          map: map,
          radius: dist,
          strokeOpacity: 0,
          fillOpacity: 0
        });
        var myBounds = myCircle.getBounds();
        
        //filters markers
        for(var i=markerArray.length;i--;) {
          if(!myBounds.contains(markerArray[i].getPosition()))
            markerArray[i].setMap(null);
        }
        map.setCenter(markerArray[markerArray.length - 1].getPosition());
        map.setZoom(map.getZoom()+1);
      }

      window.onload = initialize;
      function createCir() {
        createRadius(5000);
      }
      function changeAddress() {
        map.setCenter(new google.maps.LatLng(-34.028249, 151.157507)); // SHOULD BE THE LOCATION ENTERED
      }
    </script>
   </head>
  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">SP<i class="fa fa-circle"></i>T</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">HOME</a></li>
            <li class="active"><a href="about.html">ABOUT</a></li>
            <li><a href="services.html">SERVICES</a></li>
            <li><a href="works.html">WORKS</a></li>
            <li><a data-toggle="modal" data-target="#myModal" href="#myModal"><i class="fa fa-envelope-o"></i></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div id="map_canvas"></div>
    <button onclick="createCir()">Create Circle</button>
    <input type="text" id="address">
    <button onclick="changeAddress()">Go</button>
  </body>
</html>